(function(n){typeof define=="function"&&define.amd?define(["jquery"],n):n(jQuery)})(function(n){n.fn.tweet=function(t){function r(n,t){var i,r,u;if(typeof n=="string"){i=n;for(r in t)u=t[r],i=i.replace(new RegExp("{"+r+"}","g"),u===null?"":u);return i}return n(t)}function u(t,i){return function(){var r=[];return this.each(function(){r.push(this.replace(t,i))}),n(r)}}function e(n){return n.replace(/</g,"&lt;").replace(/>/g,"^&gt;")}function s(n,t){return n.replace(f,function(n){for(var i,r=/^[a-z]+:/i.test(n)?n:"http://"+n,f=n,u=0;u<t.length;++u)if(i=t[u],i.url==r&&i.expanded_url){r=i.expanded_url;f=i.display_url;break}return'<a href="'+e(r)+'">'+e(f)+"<\/a>"})}function h(n){return Date.parse(n.replace(/^([a-z]{3})( [a-z]{3} \d\d?)(.*)( \d{4})$/i,"$1,$2$4$3"))}function c(n){var i=arguments.length>1?arguments[1]:new Date,t=parseInt((i.getTime()-n)/1e3,10);return t<1?"just now":t<60?t+" seconds ago":t<120?"about a minute ago":t<2700?"about "+parseInt(t/60,10).toString()+" minutes ago":t<7200?"about an hour ago":t<86400?"about "+parseInt(t/3600,10).toString()+" hours ago":t<172800?"about a day ago":"about "+parseInt(t/86400,10).toString()+" days ago"}function l(n){return n.match(/^(@([A-Za-z0-9-_]+)) .*/i)?i.auto_join_text_reply:n.match(f)?i.auto_join_text_url:n.match(/^((\w+ed)|just) .*/im)?i.auto_join_text_ed:n.match(/^(\w*ing) .*/i)?i.auto_join_text_ing:i.auto_join_text_default}function a(){var f=i.modpath,t=i.fetch===null?i.count:i.fetch,r={include_entities:1},u;return i.list?{host:i.twitter_api_url,url:"/1.1/lists/statuses.json",parameters:n.extend({},r,{list_id:i.list_id,slug:i.list,owner_screen_name:i.username,page:i.page,count:t,include_rts:i.retweets?1:0})}:i.favorites?{host:i.twitter_api_url,url:"/1.1/favorites/list.json",parameters:n.extend({},r,{list_id:i.list_id,screen_name:i.username,page:i.page,count:t})}:i.query===null&&i.username.length===1?{host:i.twitter_api_url,url:"/1.1/statuses/user_timeline.json",parameters:n.extend({},r,{screen_name:i.username,page:i.page,count:t,include_rts:i.retweets?1:0})}:(u=i.query||"from:"+i.username.join(" OR from:"),{host:i.twitter_search_url,url:"/1.1/search/tweets.json",parameters:n.extend({},r,{q:u,count:t})})}function o(n,t){return t?"user"in n?n.user.profile_image_url_https:o(n,!1).replace(/^http:\/\/[a-z0-9]{1,3}\.twimg\.com\//,"https://s3.amazonaws.com/twitter_production/"):n.profile_image_url||n.user.profile_image_url}function v(t){var u={};return u.item=t,u.source=t.source,u.name=t.from_user_name||t.user.name,u.screen_name=t.from_user||t.user.screen_name,u.avatar_size=i.avatar_size,u.avatar_url=o(t,document.location.protocol==="https:"),u.retweet=typeof t.retweeted_status!="undefined"&&t.retweeted_status!=null,u.tweet_time=h(t.created_at),u.join_text=i.join_text=="auto"?l(t.text):i.join_text,u.tweet_id=t.id_str,u.twitter_base="http://"+i.twitter_url+"/",u.user_url=u.twitter_base+u.screen_name,u.tweet_url=u.user_url+"/status/"+u.tweet_id,u.reply_url=u.twitter_base+"intent/tweet?in_reply_to="+u.tweet_id,u.retweet_url=u.twitter_base+"intent/retweet?tweet_id="+u.tweet_id,u.favorite_url=u.twitter_base+"intent/favorite?tweet_id="+u.tweet_id,u.retweeted_screen_name=u.retweet&&t.retweeted_status.user.screen_name,u.tweet_relative_time=c(u.tweet_time),u.entities=t.entities?(t.entities.urls||[]).concat(t.entities.media||[]):[],u.tweet_raw_text=u.retweet?"RT @"+u.retweeted_screen_name+" "+t.retweeted_status.text:t.text,u.tweet_text=n([s(u.tweet_raw_text,u.entities)]).linkUser().linkHash()[0],u.tweet_text_fancy=n([u.tweet_text]).makeHeart()[0],u.user=r('<a class="tweet_user" href="{user_url}">{screen_name}<\/a>',u),u.join=i.join_text?r(' <span class="tweet_join">{join_text}<\/span> ',u):" ",u.avatar=u.avatar_size?r('<a class="tweet_avatar" href="{user_url}"><img src="{avatar_url}" height="{avatar_size}" width="{avatar_size}" alt="{screen_name}\'s avatar" title="{screen_name}\'s avatar" border="0"/><\/a>',u):"",u.time=r('<span class="tweet_time"><a href="{tweet_url}" title="view tweet on twitter">{tweet_relative_time}<\/a><\/span>',u),u.text=r('<span class="tweet_text">{tweet_text_fancy}<\/span>',u),u.reply_action=r('<a class="tweet_action tweet_reply" href="{reply_url}">reply<\/a>',u),u.retweet_action=r('<a class="tweet_action tweet_retweet" href="{retweet_url}">retweet<\/a>',u),u.favorite_action=r('<a class="tweet_action tweet_favorite" href="{favorite_url}">favorite<\/a>',u),u}var i=n.extend({modpath:"/twitter/",username:null,list_id:null,list:null,favorites:!1,query:null,avatar_size:null,count:3,fetch:null,page:1,retweets:!0,intro_text:null,outro_text:null,join_text:null,auto_join_text_default:"i said,",auto_join_text_ed:"i",auto_join_text_ing:"i am",auto_join_text_reply:"i replied to",auto_join_text_url:"i was looking at",loading_text:null,refresh_interval:null,twitter_url:"twitter.com",twitter_api_url:"api.twitter.com",twitter_search_url:"api.twitter.com",template:"{avatar}{time}{join}{text}",comparator:function(n,t){return t.tweet_time-n.tweet_time},filter:function(){return!0}},t),f=/\b((?:[a-z][\w-]+:(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'".,<>?«»“”‘’]))/gi;return n.extend({tweet:{t:r}}),n.fn.extend({linkUser:u(/(^|[\W])@(\w+)/gi,'$1<span class="at">@<\/span><a href="http://'+i.twitter_url+'/$2">$2<\/a>'),linkHash:u(/(?:^| )[\#]+([\w\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u00ff\u0600-\u06ff]+)/gi,' <a href="https://twitter.com/search?q=%23$1'+(i.username&&i.username.length==1&&!i.list?"&from="+i.username.join("%2BOR%2B"):"")+'" class="tweet_hashtag">#$1<\/a>'),makeHeart:u(/(&lt;)+[3]/gi,"<tt class='heart'>&#x2665;<\/tt>")}),this.each(function(t,u){var f=n('<ul class="tweet_list">'),e='<p class="tweet_intro">'+i.intro_text+"<\/p>",o='<p class="tweet_outro">'+i.outro_text+"<\/p>",s=n('<p class="loading">'+i.loading_text+"<\/p>");i.username&&typeof i.username=="string"&&(i.username=[i.username]);n(u).unbind("tweet:load").bind("tweet:load",function(){i.loading_text&&n(u).empty().append(s);n.ajax({dataType:"json",type:"post",async:!1,url:i.modpath||"/twitter/",data:{request:a()},success:function(t){var s,h;t.message&&console.log(t.message);s=t.response;n(u).empty().append(f);i.intro_text&&f.before(e);f.empty();resp=s.statuses!==undefined?s.statuses:s.results!==undefined?s.results:s;h=n.map(resp,v);h=n.grep(h,i.filter).sort(i.comparator).slice(0,i.count);f.append(n.map(h,function(n){return"<li>"+r(i.template,n)+"<\/li>"}).join("")).children("li:first").addClass("tweet_first").end().children("li:odd").addClass("tweet_even").end().children("li:even").addClass("tweet_odd");i.outro_text&&f.after(o);n(u).trigger("loaded").trigger(h?"empty":"full");i.refresh_interval&&window.setTimeout(function(){n(u).trigger("tweet:load")},1e3*i.refresh_interval)}})}).trigger("tweet:load")})}});
/*
//# sourceMappingURL=jquery.tweet.min.js.map
*/